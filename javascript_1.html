<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>A Solution to the Happy Numbers Problem in JavaScript - Ryan&#x27;s Personal Blog</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">ServiceNow</li><li class="chapter-item expanded "><a href="servicenow_1.html"><strong aria-hidden="true">1.</strong> List Choice UI Action on Database View</a></li><li class="chapter-item expanded "><a href="servicenow_2.html"><strong aria-hidden="true">2.</strong> Portal UI Actions, Part 1</a></li><li class="chapter-item expanded "><a href="servicenow_3.html"><strong aria-hidden="true">3.</strong> Portal UI Actions, Part 2</a></li><li class="chapter-item expanded "><a href="servicenow_4.html"><strong aria-hidden="true">4.</strong> Passing Values to Arrays During GlideRecord Queries</a></li><li class="chapter-item expanded affix "><li class="part-title">JavaScript</li><li class="chapter-item expanded "><a href="javascript_1.html" class="active"><strong aria-hidden="true">5.</strong> A Solution to the Happy Numbers Problem in JavaScript</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Ryan&#x27;s Personal Blog</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="a-solution-to-the-happy-numbers-problem-in-javascript"><a class="header" href="#a-solution-to-the-happy-numbers-problem-in-javascript">A Solution to the Happy Numbers Problem in Javascript</a></h1>
<p><em>2 March 2023</em></p>
<p>A happy number is a number defined as follows:</p>
<p>Starting with any positive integer, replace the number by the sum of its squares of its digits, and repeat the process until the number equals 1.</p>
<p>If the number is a happy number, it will resolve to 1. If it is a sad number, it will loop endlessly.</p>
<p>Let’s get the first 10,000 happy numbers!</p>
<pre><code class="language-javascript">// INSTANTIATE OUR SETS
// WE KNOW 1 IS A HAPPY NUMBER BY DEFINITION
let happyNumbers = new Set([1]);
let sadNumbers = new Set();

// GET FIRST 10,000 HAPPY NUMBERS
for (x = 0; happyNumbers.size &lt; 10000; x++) {
    getHappyNumber(x);
}

// RESULT OUTPUT
var finalArray = Array.from(happyNumbers).sort( (a, b) =&gt; a - b);
console.log("Happy Numbers: " + finalArray.join(', '));

function getHappyNumber(input) {

    // HOLDING ARRAY WILL LET US KEEP TRACK OF CALCULATED SUMS OF SQUARED DIGITS
    let holdingArray = [];

    while (true) {
        // IF HAPPY NUMBER ALREADY HAS IT
        // NO NEED TO RECALCULATE, PUSH TO SET OF HAPPY NUMBERS
        if (happyNumbers.has(input)) {
            holdingArray.forEach(x =&gt; happyNumbers.add(x));
            break;

        // IF WE ARE IN A LOOP OR SAD NUMBER ALREADY HAS IT
        // NO NEED TO RECALCULATE, PUSH TO SET OF SAD NUMBERS
        } else if (sadNumbers.has(input) || holdingArray.includes(input)) {
            holdingArray.forEach(x =&gt; sadNumbers.add(x));
            break;
        }

        // PUSH THE NUMBER TO THE HOLDING ARRAY
        holdingArray.push(input);

        // CALCULATE SUM OF SQUARES
        // GOTTA TURN THIS NUMBER INTO A STRING
        // AND THEN SPLIT IT INTO AN ARRAY
        // AND SUM UP EACH SQUARED VALUE WITH REDUCE
        input = input.toString().split('').reduce(
            (acc, cur) =&gt; acc + (cur ** 2), 0
        );
    }

}
</code></pre>
<p>Time to break this bad boy down.</p>
<h2 id="breaking-this-bad-boy-down"><a class="header" href="#breaking-this-bad-boy-down">Breaking This Bad Boy Down</a></h2>
<p>Let’s start with the basic part, where we turn one number into a sum of its squared digits. That’s the part at the end!</p>
<p>Here’s a example with an input and an output.</p>
<pre><code class="language-javascript">let input = 19;

let output = input.toString().split('').reduce(
    (acc, cur) =&gt; acc + (cur ** 2), 0
);

console.log("Input: " + input + " Output: " + output);
// Input: 19 Output: 82
</code></pre>
<p>What we’re doing is:</p>
<ol>
<li>Taking that number input and turning it into a String</li>
<li>Splitting its digits into an array</li>
<li>Reducing the array by adding each array element (digit) ** 2 (squared) to our initial value of 0</li>
</ol>
<p>Of course, that 82 would need to be further reduced into 68, which would be reduced to 100, which would be reduced to 1! This means that we now know, by looking at 19, that 19, 82, 68, and 100 are all happy numbers.</p>
<p>We can now examine the whole getHappyNumber() function.</p>
<pre><code class="language-javascript">// INSTANTIATE OUR SETS
// WE KNOW 1 IS A HAPPY NUMBER BY DEFINITION
let happyNumbers = new Set([1]);
let sadNumbers = new Set();

// snipping this part for later :)

function getHappyNumber(input) {

    // HOLDING ARRAY WILL LET US KEEP TRACK OF CALCULATED SUMS OF SQUARED DIGITS
    let holdingArray = [];

    while (true) {
        // IF HAPPY NUMBER ALREADY HAS IT
        // NO NEED TO RECALCULATE, PUSH TO SET OF HAPPY NUMBERS
        if (happyNumbers.has(input)) {
            holdingArray.forEach(x =&gt; happyNumbers.add(x));
            break;

        // IF WE ARE IN A LOOP OR SAD NUMBER ALREADY HAS IT
        // NO NEED TO RECALCULATE, PUSH TO SET OF SAD NUMBERS
        } else if (sadNumbers.has(input) || holdingArray.includes(input)) {
            holdingArray.forEach(x =&gt; sadNumbers.add(x));
            break;
        }

        // PUSH THE NUMBER TO THE HOLDING ARRAY
        holdingArray.push(input);

        // CALCULATE SUM OF SQUARES
        // GOTTA TURN THIS NUMBER INTO A STRING
        // AND THEN SPLIT IT INTO AN ARRAY
        // AND SUM UP EACH SQUARED VALUE WITH REDUCE
        input = input.toString().split('').reduce(
            (acc, cur) =&gt; acc + (cur ** 2), 0
        );
    }

}
</code></pre>
<p>You’ll notice the first thing we do, outside the function, is instantiate two Sets — happyNumbers and sadNumbers. This will help us keep track of the numbers we’ve already determined to be happy and sad so we don’t waste time recomputing them.</p>
<p>First, we set our temporary holdingArray. This is where we’re going to store our numbers like 19, 82, 68, and so forth, as we calculate.</p>
<p>Next, we enter the <strong>while</strong> loop, which loops until we hit a break point.</p>
<p>The first thing we do is check whether our happyNumbers Set already has our input number. For example, if we are looking at the number <strong>82</strong>, we have presumably already examined <strong>19</strong> and so we would already know <strong>82</strong> is a happy number. No need to go through the whole calculation again — push what we’ve got straight into the happyNumbers Set.</p>
<p>Similarly, we can next check if our sadNumbers Set already has our input number, for the same reason. We also check whether holdingArray already has that number, because if it does we’re stuck in an endless loop which will never resolve to 1, and that’s a sad number. Push it to the sadNumbers Set and stop looping!</p>
<p>If neither condition is satisfied, then we’ve got a brand new number to examine! Push it to our holdingArray for later, and perform our calculation on it.</p>
<p>So, how do we call this to get our first 10,000 happy numbers? We can use a <strong>for</strong> loop for that!</p>
<pre><code class="language-javascript">// GET FIRST 10,000 HAPPY NUMBERS
for (x = 0; happyNumbers.size &lt; 10000; x++) {
    getHappyNumber(x);
}
</code></pre>
<p>Rather than waiting until x gets to a certain size, we’re just going to loop until our happyNumbers Set reaches a size of 10,000.</p>
<p>Finally, we can output our result!</p>
<pre><code class="language-javascript">// RESULT OUTPUT
var finalArray = Array.from(happyNumbers).sort( (a, b) =&gt; a - b);
console.log("Happy Numbers: " + finalArray.join(', '));
</code></pre>
<p>We create an array out of our happyNumbers Set, and then sort it numerically (since our numbers will all be out of order by default). We can then log this result to our console.</p>
<h2 id="in-summary"><a class="header" href="#in-summary">In Summary</a></h2>
<p>This was a pretty fun exercise and my first real use of Sets.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="servicenow_4.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="servicenow_4.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
